mandatory: true
code: |
  # Code-flow block
  
  # can_afford
  if not can_afford:
    has_lawyer
  
  if has_lawyer:
    still_acting
    
  # exception_appeal
  if not exception_appeal:
    ab_resident
    
  if ab_resident:
    alb_matter
    
  if alb_matter
    family_matter
    
  if not family_matter:
    criminal_matter
    
  
---
mandatory: True
question:  Results
attachments:
  - name: Legal Aid Help
    filename: legalaid
    content: |
      # 
      Hello ${ user }.
      This is your Legal Aid Help.
      
      Based on the information you have entered:
      
      % if ( not ( can_afford or has_lawyer or still acting ) ) and ( ( ab_resident ) and ( family_matter or criminal_matter )  or exception_appeal ):
      
      You qualify! Congratulations!
      
      % else:
      You do not qualify. Sorry.
      
      % endif
      
      
      % if not can_afford:
      You said you cannot afford a lawyer.
      % if has_lawyer:
      You said you have a lawyer.
      % if still_acting:
      You said your lawyer is still acting for you.
      % else:
      You said your lawyer is not still acting for you.
      % endif
      % else:
      You said you do not have a lawyer.
      % end if
      % else:
      You said you can afford a lawyer.
      % endif
      
      % if ( ( not ( can_afford or still acting ) ) and ( ab_resident ):
      You said you are an Alberta resident.
      % else:
      % endif
      
      % if ( ( not ( can_afford or still acting ) ) and ( ab_resident ) and alb_matter:
      You said it was an Alberta matter.
      % if family_matter:
      You said your matter was a family matter.
      % else:
      % if criminal_matter:
      You said your matter was a criminal matter.
      % else:
      You said your matter was not a criminal or family matter.
      % endif
      % endif
      % else:
      You said it was not an Alberta matter.
      
      

---
objects:
  - user: Individual
---
generic object: Individual
question:  |
  What is ${ x.object_possessive('name') }??
fields:
  - First Name: x.name.first
  - Last Name: x.name.last
---
question: Do you have a lawyer?
yesno: has_lawyer
---
question: Is your lawyer still acting for you?
yesno: still_acting
---
question: Can you afford a lawyer?
yesno: can_afford
---
question: Are you an Alberta resident?
yesno: ab_resident
---
question: Is the matter in Alberta?
yesno: alb_matter
---
question: Is the matter regarding family law?
yesno: family_matter
---
question: Is the matter regarding criminal law?
yesno: criminal_matter
---
question: Is the matter an appeal of a matter which Legal Aid provided assistance?
yesno: exception_appeal