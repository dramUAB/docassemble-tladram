objects:
  - user: Individual
---
mandatory: True
question:  Results
attachments:
  - name: Legal Aid Help
    filename: legalaid
    content: |
      # 
      Hello, ${ user }.
      This is your Legal Aid Help.
      
      Based on the information you have entered:
      
      ${ qualified_aid }
      % if qualified_aid:
      Congratulations, you have qualified for Legal Aid!
      
      % if appeal_prior_help:
      You recieved prior help, so you will recieve it again for the appeal.
      % else:
      You did not recieve prior help from us.
      
      % if afford_lawyer = False:
      You cannot afford a lawyer, therefore you are underrepresented.
      % else:
      You do not currently have a working lawyer, therefore you are underrepresented.
      % endif
      
      
      % if lives_alberta
      You live in Alberta, and the 
      
      % if in_alberta
      matter is in Alberta.
      % else:
      matter is not in Alberta.
      % endif
      
      % else:
      You do not live in Alberta, and the
      % if in_alberta
      matter is in Alberta.
      % else:
      matter is not in Alberta.
      % endif
      
      % endif
      
      % endif
      
      Your matter is ${ legal_matter }, which we cover here.
      
      % else:
      Unfortunately, you do not qualify for legal aid.
      
      % if afford_lawyer
      You can afford your own lawyer.
      % else:
      You cannot afford your own lawyer, but you have one acting for you.
      % endif
      
      % if lives_alberta
      You live in Alberta, and the 
      
      % if in_alberta
      matter is in Alberta.
      % else:
      matter is not in Alberta.
      % endif
      
      % else:
      You do not live in Alberta, and the
      % if in_alberta
      matter is in Alberta.
      % else:
      matter is not in Alberta.
      % endif
      
      % endif
      
      
      % endif
---
generic object: Individual
question: |
  What is ${ x.object_possessive('name') }?
fields:
  - First Name: x.name.first
    default: ${ x.first_name_hint() }
  - Middle Name: x.name.middle
    required: False
  - Last Name: x.name.last
    default: ${ x.last_name_hint() }
---
question: Do you have a lawyer?
yesno: has_lawyer
---
question: Can you afford a lawyer?
yesno: afford_lawyer
---
question: If you have a lawyer, are they still acting for you?
yesno: lawyer_still_acting
---
question: Is the legal matter located in Alberta?
yesno: in_alberta
---
question: Is the matter criminal or family?
fields:
  - Matters: legal_matter
    choices:
      -Criminal
      -Family
---
question: Do you live in Alberta?
yesno: lives_alberta
---
question: Is the matter an appeal for which the user received LAA assistance?
yesno: appeal_prior_help
---
code:  |
  if afford_lawyer or ( has_lawyer and lawyer_still_acting )
    under_represented = False
  else:
    under_represented = True
---
code:  |
  if appeal_prior_help or ( lives_alberta and in_alberta and legal_matter == "Criminal" or legal_matter == "Family" )
    residency_requirement = True
  else:
    residency_requirement = False
---
code:  |
  if under_represented and residency_requirement
    qualified_aid = True
  else:
    qualified_aid = False